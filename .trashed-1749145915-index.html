
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chat Europa</title>
  <style>
    body { font-family: sans-serif; padding: 20px; text-align: center; }
    .hidden { display: none; }
    button { padding: 10px 20px; margin: 10px; }
  </style>
</head>
<body>
  <div id="age-check">
    <h2>Welkom bij Chat Europa</h2>
    <p>Deze site is bedoeld voor 18+ gebruikers.</p>
    <button onclick="confirmAge()">Ik ben 18+</button>
  </div>

  <div id="language-select" class="hidden">
    <h3>Kies je taal of regio:</h3>
    <button onclick="enterChat('nl')">Nederlands</button>
    <button onclick="enterChat('fr')">Fran√ßais</button>
    <button onclick="enterChat('de')">Deutsch</button>
    <button onclick="enterChat('en')">English</button>
  </div>

  <div id="chat-room" class="hidden">
    <h3>Chatroom: <span id="room-name"></span></h3>
    <div id="chat-box" style="height:300px; overflow-y:scroll; border:1px solid #ccc; padding:10px;"></div>
    <input type="text" id="message" placeholder="Typ een bericht..." />
    <button onclick="sendMessage()">Verstuur</button>
  </div>

  <audio id="ping" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg" preload="auto"></audio>

  <script>
    let username = "Gast" + Math.floor(Math.random() * 10000);
    let room = "";
    let socket;

    function confirmAge() {
      document.getElementById('age-check').classList.add('hidden');
      document.getElementById('language-select').classList.remove('hidden');
    }

    function enterChat(lang) {
      room = lang;
      document.getElementById('language-select').classList.add('hidden');
      document.getElementById('chat-room').classList.remove('hidden');
      document.getElementById('room-name').innerText = lang.toUpperCase();

      const script = document.createElement('script');
      script.src = "https://cdn.socket.io/4.5.4/socket.io.min.js";
      script.onload = () => {
        socket = io("https://chat-europa-server.glitch.me");
        socket.emit("joinRoom", room, username);

        socket.on("message", (data) => {
          const box = document.getElementById('chat-box');
          const div = document.createElement('div');
          div.innerHTML = "<strong>" + data.user + ":</strong> " + data.text;
          box.appendChild(div);
          box.scrollTop = box.scrollHeight;
          document.getElementById('ping').play();
        });
      };
      document.body.appendChild(script);
    }

    function sendMessage() {
      const input = document.getElementById('message');
      if (input.value && socket) {
        socket.emit("chatMessage", { room, user: username, text: input.value });
        input.value = "";
      }
    }
  </script>
</body>
</html>
